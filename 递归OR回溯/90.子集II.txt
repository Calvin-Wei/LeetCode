//ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚ 
//
// è§£é›† ä¸èƒ½ åŒ…å«é‡å¤çš„å­é›†ã€‚è¿”å›çš„è§£é›†ä¸­ï¼Œå­é›†å¯ä»¥æŒ‰ ä»»æ„é¡ºåº æ’åˆ—ã€‚ 
//
// 
// 
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [1,2,2]
//è¾“å‡ºï¼š[[],[1],[1,2],[1,2,2],[2],[2,2]]
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [0]
//è¾“å‡ºï¼š[[],[0]]
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 1 <= nums.length <= 10 
// -10 <= nums[i] <= 10 
// 
// 
// 
// Related Topics ä½è¿ç®— æ•°ç»„ å›æº¯ 
// ğŸ‘ 682 ğŸ‘ 0


import java.util.ArrayList;
import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    private List<List<Integer>> result;
    private LinkedList<Integer> path;

    private boolean[] visited;

    public List<List<Integer>> subsetsWithDup(int[] nums) {
        this.result=new ArrayList<>();
        if(nums.length==0){
            this.result.add(new ArrayList<>());
            return result;
        }
        Arrays.sort(nums);
        this.path=new LinkedList<>();
        visited=new boolean[nums.length];
        handleWithDup(nums,0);
        return result;
    }

    private void handleWithDup(int[] nums, int index) {
        result.add(new ArrayList<>(path));
        if(index>=nums.length){
            return;
        }
        for(int i=index;i<nums.length;i++){
            // å¦‚æœå½“å‰å…ƒç´ å’Œå‰ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œè€Œä¸”å‰ä¸€ä¸ªå…ƒç´ æ²¡æœ‰è¢«è®¿é—®(ä»£è¡¨å‰ä¸€ä¸ªå…ƒç´ å·²ç»è¢«å›æº¯å¤„ç†å®Œæˆ)ï¼Œåˆ™ç›´æ¥è·³è¿‡
            //è¡¨é¢ä¸Šï¼Œcontinueæ¡ä»¶åº”è¯¥æ˜¯å‰ä¸€ä¸ªå…ƒç´ è¢«ä½¿ç”¨è¿‡ï¼Œè¿™é‡Œè·Ÿæ­£å¸¸é€»è¾‘ç›¸æ‚–ï¼› ä»”ç»†æƒ³æƒ³ï¼Œå¦‚æœused[i - 1]è¢«æ ‡è®°ä¸º1ï¼Œ è¯´æ˜è¯¥å…ƒç´ åˆšè¢«ä½¿ç”¨è¿‡ä¸”æœªå›æº¯ï¼Œé‚£ä¹ˆå°±ç®—ç¬¬iä¸ªå…ƒç´ å’Œç¬¬i-1ä¸ªå…ƒç´ ç›¸ç­‰ï¼Œä¹Ÿå¯ä»¥æ”¾å¿ƒå¤§èƒ†åœ°åŠ åˆ°sublisté‡Œé¢ï¼Œå› ä¸ºåŠ å…¥ä»¥åä¸€å®šæ¯”ä¹‹å‰å…ƒç´ å¤šä¸€ä¸ªï¼Œä¸ä¼šé‡å¤ï¼› ç›¸åï¼Œå¦‚æœused[i - 1]è¢«æ ‡è®°ä¸º0ï¼Œ å› ä¸ºç°åœ¨å·²ç»è®¿é—®åˆ°ä¹‹åçš„å…ƒç´ äº†ï¼Œä¹‹å‰å…ƒç´ ä¸€å®šæ˜¯è¢«è®¿é—®è¿‡çš„ï¼Œé‚£ä¹ˆè¢«æ ‡0åªæœ‰ä¸€ç§å¯èƒ½ï¼Œå°±æ˜¯è¯¥å…ƒç´ å·²ç»è¢«å›æº¯è¿‡äº†ï¼Œæ­¤æ—¶å¿…é¡»è·³è¿‡å½“å‰å…ƒç´ ï¼Œå¦åˆ™ä¼šé‡å¤ï¼Œå› ä¸ºlisté‡Œé¢å·²ç»æœ‰ç›¸åŒçš„sublist.
            if(i>0 && nums[i]==nums[i-1] && !visited[i-1]){
                continue;
            }
            path.add(nums[i]);
            visited[i]=true;
            handleWithDup(nums,i+1);
            path.removeLast();
            visited[i]=false;
        }
    }
}
//leetcode submit region end(Prohibit modification and deletion)
